## 第13章 类继承

### 概述
- is-a 关系的继承
- 如何以公有的方式从一个类派生出另一个类
- 保护访问
- 构造函数成员初始化列表
- 向上和向下强制转换
- 虚成员函数
- 早期（静态）联编和晚期（动态）联编
- 抽象基类
- 纯虚函数
- 何时及如何使用公有继承

### 13.1 一个简单的基类

C++ 有三种继承方式：
- public 公有继承
- protected 保护继承
- private 私有继承

公有派生：
- 派生类对象包含基类对象
- 基类对象**公有成员**成为派生类的公有成员
- 基类**私有成员**，只能通过基类的公有和保护方法访问

#### 构造函数

派生类不能访问继承的基类的私有成员，导致**派生类构造函数必须使用基类构造函数**

**派生类创建对象时，程序首先创建基类对象，基类对象在程序进入派生类构造函数之前被创建，通过成员初始化列表来完成这项工作。**

除非使用默认构造函数，否则在列表初始化时应显示调用正确的基类构造函数

```c++
RatedPlayer::RatedPlayer(unsigned int r, const string &fn, const string &ln, bool ht)
    : TableTennisPlayer(fn, ln, ht) // 显式调用基类构造函数
{
    rating = r;
}

// 隐式调用基类默认构造函数
RatedPlayer::RatedPlayer(unsigned int r, const string &fn, const string &ln, bool ht) 
// :TableTennisPlayer() 相当于这样
{
    rating = r;
}

// 调用基类复制构造函数，基类没有定义拷贝构造函数，编译器自动生成
RatedPlayer::RatedPlayer(unsigned int r, const TableTennisPlayer &tp)
    : TableTennisPlayer(tp)
{
    rating = r;
}
```

### 13.2 继承：is-a 关系

公有继承是最常用的方式，它建立一种 is-a 的关系，即派生类对象也是一个基类对象，可以对基类对象执行任何操作，也可以对派生类对象执行。水果是基类，香蕉是派生类，“香蕉是一种水果”

### 13.3 多态公有继承

实现多态公有继承的两种重要的机制：
- 在派生类中重新定义基类方法
- 使用虚方法

虚函数（virtual）行为表现：
- 如果没有使用关键字 virtual ，程序将根据引用类型或指针类型选择相应的方法
- 如果使用了 virtual 关键字，程序将根据引用或指针指向的对象的类型来选择方法
- 通常将在派生类中重新定义的方法声明为虚函数，方法在基类中被声明为虚函数后，在派生类将自动成为虚方法，建议在派生类中依然使用 virtual 标识哪些是虚函数
- 通常将基类析构函数声明为虚析构函数
