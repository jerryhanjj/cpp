### 3.1 简单变量

C++命名规则
- 只能使用字母字符、数字和下划线（_）
- 第一个字符不能是数字
- 区分大小写
- 不能是**关键字**
- **以两个下划线或下划线和大写字母打头的名称被保留给实现（编译器及其使用的资源）使用**
- 不能超出平台的限制


初始化，注意大括号初始化器 `{}` 的使用

```c
int owls = 10;
int owls(10);   // C++ 特性
int owls = {10};    // C++98 以后
int owls{10};
int owls{}; // 初始化为 0
```

各类整型的最大最小值限制，在头文件 `climits(limits.h)` 中

```c
#pragma once
#define _INC_LIMITS

#include <vcruntime.h>

_CRT_BEGIN_C_HEADER

#define CHAR_BIT      8         // number of bits in a char
#define SCHAR_MIN   (-128)      // minimum signed char value
#define SCHAR_MAX     127       // maximum signed char value
#define UCHAR_MAX     0xff      // maximum unsigned char value
...
```

整型字面值

```c
int chest = 42; // 十进制
int waist = 042;    // 八进制
int inseam = 0x42;  // 十六进制
```

### 3.2 const 限定符

`const` 和 `#define` 在声明常量上的不同
- 明确指定类型
- 使用C++作用域规则，限制使用范围
- const用于更复杂的类型，比如数组和结构

### 3.3 浮点数

浮点类型精度问题

| 类型        | 位数 | 有效位数 | 数值范围                      |
| ----------- | ---- | -------- | ----------------------------- |
| float       | 32   | 6-7      | -3.4\*10(-38)～3.4*10(38)     |
| double      | 64   | 15-16    | -1.7\*10(-308)～1.7*10(308)   |
| long double | 128  | 18-19    | -1.2\*10(-4932)～1.2*10(4932) |

```c
float a = 2.34E22f;
float b = a + 1.0f;
cout << b-a << endl;    // 0 float 有效位数6-7，改变第23位不影响结果的精确度
```

浮点常量默认情况下被认为 `double` 类型

```c
1.234f      // float
1.23E20F    // float
1.23456E20  // double
1.234L      // long double
```

`double` 和 `float` 的区别是 `double` 精度高，有效数字 16 `位，float` 精度 7 位。但 `double` 消耗内存是 `float` 的两倍，`double` 的运算速度比 `float` 慢得多，C 语言中数学函数名称 `double` 和 `float` 不同，不要写错，能用单精度时不要用双精度

### 3.4 运算符

- 符号优先级
- 同优先级同一操作数，从左至右结合
- 同优先级不同操作数，由**实现**决定结合顺序

求模运算 `%` 不能用于浮点数，如果其中一个是负数，结果的符号满足规则 `(a/b)*b+a%b=a`

#### 3.4.4 类型转换

下列情况下可能会发生类型转换
- 不同算数类型赋值
- 表达式包含不同类型
- 函数传参

初始化和赋值时进行的转换，将取值范围大的类型赋值给取值范围小的类型会有潜在问题。
- 精度降低
- 小数部分丢失，截断
- 值超出表示范围，结果不确定

以 `{}` （列表初始化）方式初始化时进行的转换，对类型转换要求更加严格，不允许**缩窄**

```c
const int code = 66;
int x = 66;
char c1 {31325};    // 缩窄 不允许
char c2 = {66};     // 在范围内
char c3 {code}      // 同上
char c4 = {x};      // 不允许 x 被认为是变量 与 code 不同
char c5 = 31325;    // 允许，要求不严格
```

表达式中的转换
1. 如果有一个操作数类型是long double，则将另一个操作数转换为long double
2. 否则，如果有一个操作数的类型是double，则将另一个操作数转换为double
3. 否则，如果有一个操作数的类型是float，则将另一个操作数转换为float
4. 否则，说明操作数都是整型，因此进行**整型提升**
5. 如果两个数都是有符号或者无符号，且操作数级别不同，则转换为级别高的类型
6. 如果一个有符号一个无符号，且无符号操作数级别高，则转换为其所属类型
7. 否则，如果有符号类型可表示无符号所有的值，则转换为有符号操作数的类型
8. 否则，两个操作数都转换为有符号类型的无符号版本









